<VirtualHost *:443>
  ServerName {{  mediawiki.domain }}
  SSLEngine on
  SSLCertificateFile /etc/letsencrypt/live/{{ mediawiki.domain }}/cert.pem
  SSLCertificateKeyFile /etc/letsencrypt/live/{{ mediawiki.domain }}/privkey.pem

  SSLProtocol All -SSLv2 -SSLv3
  SSLCipherSuite ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:!RC4:HIGH:!MD5:!aNULL:!EDH
  SSLHonorCipherOrder on
  SSLCompression off

  # Add six earth month HSTS header for all users...
  Header add Strict-Transport-Security "max-age=15768000"
  # If you want to protect all subdomains, use the following header
  # Header always set Strict-Transport-Security "max-age=15768000; includeSubDomains"

  DocumentRoot /srv/{{  mediawiki.domain }}

  ErrorLog ${APACHE_LOG_DIR}/{{ mediawiki.domain }}_ssl_error.log
  CustomLog ${APACHE_LOG_DIR}/{{ mediawiki.domain }}_ssl_access.log combined

  LogLevel warn

  ServerSignature Off
</VirtualHost>